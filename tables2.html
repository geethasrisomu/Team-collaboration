<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

</head>
<body>
    <style>
        table{
            border:solid 2px black;
            border-collapse: collapse;
        }
        th,tr,td{
            border:solid 2px black;

        }
    </style>
    <button onclick="btn()"id="btn">click me to see the table</button>
    <div id="demo"></div>
    
    <input type="number" id="searchid"placeholder="enter number between (1-10)">
    <button onclick="search()">Search</button>
    <div id="searchblock"></div>
    <script>
    
        async function btn(){
            // document.getElementById("btn").style.display="none";
            // document.getElementById("btn").style.visibility="hidden";           
            const content=document.getElementById("demo")
            try{
                const res=await fetch("https://jsonplaceholder.typicode.com/users")
                if(!res.ok){
                    throw new Error(`data error:${res.status}`)
                }
                const data=await res.json()
                let table=`<table>
                    <tr>
                        <th>id</th>
                        <th>Name</th>
                        <th>email</th>
                    </tr>
                    <tbody>`
                        data.forEach(item=>{
                            table+=`<tr><td>${item.id}</td><td>${item.name}</td><td>${item.email}</td></tr>`

                        })
                        table+=`</tbody></table>`;
                        content.innerHTML=table;
            }
            catch(error){
                content.innerHTML=`<p style="color:red">Error:${error.message}</p>`

            }
        }
        //using jquery to hide the button  
        // $(function(){
        //         $("#btn").click(function(){
        //             // $("#demo").innerHTML=table
        //               $("#btn").hide()
        //         })
          
        //  })


       async function search(){
            const id=document.getElementById("searchid").value
            if(!id||id<=0||id>10){
                searchblock.innerHTML=("please enter a valid number")
                return;
            }
            try{
                const hold= await fetch(`https://jsonplaceholder.typicode.com/users/${id}`)
                const data= await hold.json();
                if(!hold.ok){
                    throw new Error(`Error:${hold.status}`)
                }
                displaytable([data])


            }
            catch(error){
                searchblock.innerHTML=`Errror :${error.message}`


            }

        }
         function displaytable(array){
              const tablebody=document.getElementById("searchblock")
              let table=`<table>
                    <tr>
                        <th>id</th>
                        <th>Name</th>
                        <th>email</th>
                    </tr>
                    <tbody>`
                        array.forEach(item=>{
                            table+=`<tr><td>${item.id}</td><td>${item.name}</td><td>${item.email}</td></tr>`
                        })
                        table+=`</tbody></table>`
                        tablebody.innerHTML=table
         }
        
       


    </script>   
</body>

</html>